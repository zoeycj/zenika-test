{"ast":null,"code":"import axios from 'axios';\nexport default ((history = null) => {\n  const baseURL = process.env.REACT_APP_BACKEND_URL;\n  const headers = {\n    'Content-Type': 'application/json;charset=utf-8'\n  };\n  const axiosInstance = axios.create({\n    withCredentials: true,\n    headers\n  });\n  axiosInstance.interceptors.response.use(async response => new Promise((resolve, reject) => {\n    resolve(response);\n  }), async error => {\n    if (!error.response) {\n      return new Promise((resolve, reject) => {\n        reject(error);\n      });\n    }\n\n    if (error.response.status === 401) {\n      // localStorage.removeItem('userInfo')\n      if (history) {\n        history.push('/');\n      } else {\n        window.location = '/';\n      }\n    } else {\n      return new Promise((resolve, reject) => {\n        reject(error);\n      });\n    }\n  });\n  return axiosInstance;\n});","map":{"version":3,"sources":["C:/Users/kevin/Desktop/workspace/Zenika/front-end-test/src/state/api/index.js"],"names":["axios","history","baseURL","process","env","REACT_APP_BACKEND_URL","headers","axiosInstance","create","withCredentials","interceptors","response","use","Promise","resolve","reject","error","status","push","window","location"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,gBAAe,CAACC,OAAO,GAAG,IAAX,KAAoB;AACjC,QAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,qBAA5B;AAEA,QAAMC,OAAO,GAAG;AACd,oBAAgB;AADF,GAAhB;AAIA,QAAMC,aAAa,GAAGP,KAAK,CAACQ,MAAN,CAAa;AACjCC,IAAAA,eAAe,EAAE,IADgB;AAEjCH,IAAAA;AAFiC,GAAb,CAAtB;AAKAC,EAAAA,aAAa,CAACG,YAAd,CAA2BC,QAA3B,CAAoCC,GAApC,CACE,MAAOD,QAAP,IACE,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/BD,IAAAA,OAAO,CAACH,QAAD,CAAP;AACD,GAFD,CAFJ,EAKE,MAAOK,KAAP,IAAiB;AACf,QAAI,CAACA,KAAK,CAACL,QAAX,EAAqB;AACnB,aAAO,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCA,QAAAA,MAAM,CAACC,KAAD,CAAN;AACD,OAFM,CAAP;AAGD;;AAED,QAAIA,KAAK,CAACL,QAAN,CAAeM,MAAf,KAA0B,GAA9B,EAAmC;AACjC;AAEA,UAAIhB,OAAJ,EAAa;AACXA,QAAAA,OAAO,CAACiB,IAAR,CAAa,GAAb;AACD,OAFD,MAEO;AACLC,QAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACD;AACF,KARD,MAQO;AACL,aAAO,IAAIP,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCA,QAAAA,MAAM,CAACC,KAAD,CAAN;AACD,OAFM,CAAP;AAGD;AACF,GAzBH;AA4BA,SAAOT,aAAP;AACD,CAzCD","sourcesContent":["import axios from 'axios'\n\nexport default (history = null) => {\n  const baseURL = process.env.REACT_APP_BACKEND_URL\n\n  const headers = {\n    'Content-Type': 'application/json;charset=utf-8',\n  }\n\n  const axiosInstance = axios.create({\n    withCredentials: true,\n    headers,\n  })\n\n  axiosInstance.interceptors.response.use(\n    async (response) =>\n      new Promise((resolve, reject) => {\n        resolve(response)\n      }),\n    async (error) => {\n      if (!error.response) {\n        return new Promise((resolve, reject) => {\n          reject(error)\n        })\n      }\n\n      if (error.response.status === 401) {\n        // localStorage.removeItem('userInfo')\n\n        if (history) {\n          history.push('/')\n        } else {\n          window.location = '/'\n        }\n      } else {\n        return new Promise((resolve, reject) => {\n          reject(error)\n        })\n      }\n    }\n  )\n\n  return axiosInstance\n}\n"]},"metadata":{},"sourceType":"module"}